<template>
        <require from="utils/date-format"></require>
    <form class="form-horizontal">
        
        <require from="customs/elements/horsey"></require>
        <div class="form-group ${error.supplierId?'has-error':''}">
            <label for="suppliername" class="col-sm-3 control-label">Supplier</label>
            <div class="col-sm-3">
                <horsey src.bind="uriSupplier" selection.bind="data.supplier" options.bind="{label:'labelSupplier', value:'_id'}" map.bind="mapSupplier"></horsey>
                <span class="help-block">${error.supplierId}</span>
            </div>
        </div>

        <div class="form-group ${error.PODate?'has-error':''}">
            <label for="PODate" class="col-sm-3 control-label">Tanggal PO</label>
            <div class="col-sm-2">
                <input type="date" class="form-control" name="PODate" value.bind="data.PODate"></input>
                <span class="help-block">${error.PODate}</span>
            </div>       
        </div>
        
        <div class="form-group ${error.deliveryDate?'has-error':''}">
            <label for="deliveryDate" class="col-sm-3 control-label">Tanggal Kirim</label>
            <div class="col-sm-2">
                <input type="date" class="form-control" name="deliveryDate" value.bind="data.deliveryDate"></input>
                <span class="help-block">${error.deliveryDate}</span>
            </div>       
        </div>
        
        <div class="form-group ${error.deliveryFeeByBuyer?'has-error':''}">
            <label for="deliveryFeeByBuyer" class="col-sm-3 control-label">Ongkos Kirim Ditanggung oleh</label>
            <div class="col-sm-3">
                <input type="radio" name="deliveryFeeByBuyer" model.bind="true" checked.bind="data.deliveryFeeByBuyer"> Pembeli
                <input type="radio" name="deliveryFeeByBuyer" model.bind="false" checked.bind="data.deliveryFeeByBuyer"> Penjual
                <span class="help-block">${error.deliveryFeeByBuyer}</span>
            </div>
        </div>
        
        <div class="form-group ${error.termOfPayment?'has-error':''}">
            <label for="termOfPayment" class="col-sm-3 control-label">Term Pembayaran</label>
            <div class="col-sm-2">
                <select value.bind="data.termOfPayment" class="form-control">
                    <option repeat.for="termPaymentOption of termPaymentOptions" value.bind="termPaymentOption">${termPaymentOption}</option>
                </select>
                <span class="help-block">${error.termOfPayment}</span>
            </div>
        </div>
        
        <div class="form-group ${error.currency?'has-error':''}">
            <label for="currency" class="col-sm-3 control-label">Mata Uang</label>
            <div class="col-sm-2">
                <select value.bind="data.currency" class="form-control">
                    <option repeat.for="currencyOption of currencyOptions" value.bind="currencyOption">${currencyOption}</option>
                </select>
                <span class="help-block">${error.currency}</span>
            </div>
        </div>
        
        <div class="form-group ${error.rate?'has-error':''}">
            <label for="currency" class="col-sm-3 control-label">Rate</label>
            <div class="col-sm-2">
                <input type="number" min="0" class="form-control" name="rate" value.bind="data.rate" />
                <span class="help-block">${error.rate}</span>
            </div>
        </div>
        
        <div class="form-group ${error.paymentDue?'has-error':''}">
            <label for="paymentDue" class="col-sm-3 control-label">Tempo Pembayaran</label>
            <div class="col-sm-2">
                <div class="input-group">
                    <input type="number" min="0" class="form-control" name="paymentDue" value.bind="data.paymentDue" />
                    <span class="input-group-addon" id="basic-addon2">hari</span>
                </div>
                <span class="help-block">${error.paymentDue}</span>
            </div>
        </div>
        
        <div class="form-group ${error.description?'has-error':''}">
            <label for="description" class="col-sm-3 control-label">Keterangan</label>
            <div class="col-sm-4">
                <textarea class="form-control" name="description" value.bind="data.description"></textarea>
                <span class="help-block">${error.description}</span>
            </div>
        </div>
        
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Nomor PO</th>
                        <th>Nomor PR</th>
                        <th>Dikenakan PPn ?</th>
                        <th>Dikenakan PPh ?</th>
                        <th><button class="btn btn-success" click.delegate="addItem()">Tambah Barang</button> </th>
                    </tr>
                </thead>
                <tbody>
                    <template repeat.for="item of data.items">
                    <tr>
                        <td><horsey src.bind="uri" selection.bind="selection" options.bind="{label:'label', value:'_id'}" map.bind="map" change.delegate="horseyChanged($index,$event)"></horsey></td>
                        <td>${item.PRNo}</td>
                        <td>
                            <input type="radio" name="usePPn${$index}" model.bind="true" value.bind="checked" checked.bind="item.usePPn"> Ya
                            <input type="radio" name="usePPn${$index}" model.bind="false" value.bind="checked" checked.bind="item.usePPn"> Tidak
                        </td>
                        <td>
                            <input type="radio" name="usePPh${$index}" model.bind="true" checked.bind="item.usePPh"> Ya
                            <input type="radio" name="usePPh${$index}" model.bind="false" checked.bind="item.usePPh"> Tidak
                        </td>
                        <td> <button class="${item.PRNo? '' : 'hide'}  btn btn-primary" click.delegate="showDetail(item)">Rincian Barang</button> </td>
                    </tr>
                    <tr if.bind="item.showDetails">
                         <td></td>
                         <td colspan="4">
                             <table style='padding-top: 10px; padding-bottom:10px; border: 1px solid gray;' class="table">
                                <thead>
                                    <tr> <td align="center"colspan="4"><b>Rincian Barang</b></td> </tr>
                                    <tr>
                                        <th>Kode Barang</th>
                                        <th>Nama Barang</th>
                                        <th>Satuan</th>
                                        <th>Jumlah Barang</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr repeat.for="poItem of item.items">
                                        <td>${poItem.product.code}</td>
                                        <td>${poItem.product.name}</td>
                                        <td>${poItem.defaultMeasurement}</td>
                                        <td>${poItem.defaultQuantity}</td>
                                    </tr>
                                </tbody>
                             </table>
                        </td>
                     </tr>
                    </template>
                </tbody>
            </table>
        </div>
        <!--<div class="form-group ${error.items?'has-error':''}">
            <span class="help-block">${error.items}</span>
            <require from="../podl-item"></require> 
            <div class="col-md-3">   
                <span>PO No</span>
            </div>
            <div class="col-md-2">
                <span>>Dikenakan PPn ?</span>
            </div>
            <div class="col-md-1">
                <span>>Dikenakan PPh ?</span>
            </div>
            <div class="col-md-1 col-md-offset-4">
                <button class="btn btn-success" click.delegate="addItem()">Tambah Barang</button> 
            </div>    
            <hr />
        </div>
        <podl-item repeat.for="item of data.items" data.bind="item" uri.bind="uri" remove.delegate="removeItem(item)"></po-item>-->
            
    </form>
</template>