<template>
    <require from="../../../../lib/number-format-value-converter"></require>
    <ai-dialog style="width:500px;">
        <ai-dialog-header>Deal</ai-dialog-header>

        <ai-dialog-body>
            <form class="form-horizontal">
                <au-textbox value.bind="data.name" label="Judul" placeholder="Judul" error.bind="error.name"></au-textbox>
                
                <au-dropdown
                    label="Stage"
                    value.bind="data.stage"
                    error.bind="error.stage"
                    items.bind="stageData"
                    read-only.bind="isEdit"
                    text="name">
                </au-dropdown>

                <au-textbox value.bind="data.currency" label="Mata Uang" read-only="true"></au-textbox>
   
                <div class="form-group">
                    <label class="col-sm-3 text-right au-layout control-label">Jumlah</label>
                    <div class="col-sm-9">
                        <input ref="numeric" type="text" value.bind="data.amount | numberFormat: '0,000'" class="form-control text-right" onfocus="this.select()">
                    </div>
                </div>
                
                <au-autocomplete 
                    value.bind="data.company" 
                    error.bind="error.company"
                    label="Perusahaan" 
                    loader.one-time="companyLoader"
                    placeholder="Cari perusahaan" 
                    text="name">
                </au-autocomplete>

                <au-autocomplete 
                    value.bind="data.contact" 
                    error.bind="error.contact"
                    label="Kontak" 
                    loader.one-time="contactLoader"
                    placeholder="Cari kontak" 
                    text.bind="contactView">
                </au-autocomplete>

                <au-datepicker value.bind="data.closeDate" label="Tanggal Tutup" placeholder="Tanggal tutup" error.bind="error.closeDate"></au-datepicker>

                <au-multiline value.bind="data.description" label="Deskripsi" placeholder="Deskripsi" error.bind="error.description"></au-multiline>
                
                <au-dropdown
                    label="Alasan"
                    value.bind="data.reason"
                    error.bind="error.reason"
                    items.bind="reasons">
                </au-dropdown>
            </form>
        </ai-dialog-body>

        <ai-dialog-footer>
            <button click.delegate="controller.cancel()">Kembali</button>
            <button click.delegate="save()">Simpan</button>
        </ai-dialog-footer>
    </ai-dialog>
</template>